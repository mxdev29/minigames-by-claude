<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARCADE ZONE</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323:wght@400&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --card: #12121a;
    --neon-pink: #ff2d78;
    --neon-cyan: #00f5ff;
    --neon-yellow: #ffe600;
    --neon-green: #39ff14;
    --text: #e8e8ff;
    --dim: #5a5a7a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'VT323', monospace;
    font-size: 20px;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Scanline overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.08) 2px,
      rgba(0,0,0,0.08) 4px
    );
    pointer-events: none;
    z-index: 1000;
  }

  header {
    text-align: center;
    padding: 40px 20px 20px;
    position: relative;
  }

  header h1 {
    font-family: 'Press Start 2P', monospace;
    font-size: clamp(24px, 5vw, 52px);
    color: var(--neon-yellow);
    text-shadow: 0 0 20px var(--neon-yellow), 0 0 60px rgba(255,230,0,0.4);
    animation: flicker 4s infinite;
    letter-spacing: 4px;
  }

  header p {
    color: var(--neon-cyan);
    font-size: 22px;
    margin-top: 8px;
    text-shadow: 0 0 10px var(--neon-cyan);
  }

  @keyframes flicker {
    0%,95%,100% { opacity: 1; }
    96% { opacity: 0.8; }
    97% { opacity: 1; }
    98% { opacity: 0.6; }
    99% { opacity: 1; }
  }

  .game-select {
    display: flex;
    justify-content: center;
    gap: 16px;
    flex-wrap: wrap;
    padding: 20px;
  }

  .game-btn {
    font-family: 'Press Start 2P', monospace;
    font-size: 10px;
    padding: 12px 20px;
    border: 2px solid;
    background: transparent;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 1px;
  }

  .game-btn[data-game="snake"] { color: var(--neon-green); border-color: var(--neon-green); }
  .game-btn[data-game="snake"]:hover, .game-btn[data-game="snake"].active {
    background: var(--neon-green); color: #000;
    box-shadow: 0 0 20px var(--neon-green);
  }
  .game-btn[data-game="breakout"] { color: var(--neon-cyan); border-color: var(--neon-cyan); }
  .game-btn[data-game="breakout"]:hover, .game-btn[data-game="breakout"].active {
    background: var(--neon-cyan); color: #000;
    box-shadow: 0 0 20px var(--neon-cyan);
  }
  .game-btn[data-game="memory"] { color: var(--neon-pink); border-color: var(--neon-pink); }
  .game-btn[data-game="memory"]:hover, .game-btn[data-game="memory"].active {
    background: var(--neon-pink); color: #000;
    box-shadow: 0 0 20px var(--neon-pink);
  }
  .game-btn[data-game="reaction"] { color: var(--neon-yellow); border-color: var(--neon-yellow); }
  .game-btn[data-game="reaction"]:hover, .game-btn[data-game="reaction"].active {
    background: var(--neon-yellow); color: #000;
    box-shadow: 0 0 20px var(--neon-yellow);
  }
  .game-btn[data-game="tictactoe"] { color: #bf7fff; border-color: #bf7fff; }
  .game-btn[data-game="tictactoe"]:hover, .game-btn[data-game="tictactoe"].active {
    background: #bf7fff; color: #000;
    box-shadow: 0 0 20px #bf7fff;
  }

  .game-container {
    max-width: 700px;
    margin: 10px auto 40px;
    padding: 20px;
  }

  .game-panel {
    display: none;
    animation: slideIn 0.3s ease;
  }
  .game-panel.active { display: block; }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  canvas {
    display: block;
    margin: 0 auto;
    border: 2px solid;
    image-rendering: pixelated;
  }

  #snake-canvas { border-color: var(--neon-green); box-shadow: 0 0 20px rgba(57,255,20,0.3); }
  #breakout-canvas { border-color: var(--neon-cyan); box-shadow: 0 0 20px rgba(0,245,255,0.3); }

  .score-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 22px;
  }

  .score-bar .score { color: var(--neon-yellow); text-shadow: 0 0 8px var(--neon-yellow); }
  .score-bar .best { color: var(--dim); }

  .game-msg {
    text-align: center;
    font-family: 'Press Start 2P', monospace;
    font-size: 12px;
    margin-top: 12px;
    line-height: 1.8;
    min-height: 40px;
  }

  .action-btn {
    font-family: 'Press Start 2P', monospace;
    font-size: 10px;
    padding: 10px 24px;
    border: 2px solid var(--neon-yellow);
    background: transparent;
    color: var(--neon-yellow);
    cursor: pointer;
    display: block;
    margin: 12px auto 0;
    transition: all 0.2s;
  }
  .action-btn:hover { background: var(--neon-yellow); color: #000; box-shadow: 0 0 15px var(--neon-yellow); }

  /* Memory Game */
  .memory-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    max-width: 500px;
    margin: 0 auto;
  }

  .mem-card {
    aspect-ratio: 1;
    border: 2px solid var(--neon-pink);
    background: var(--card);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    transition: all 0.3s;
    transform: rotateY(0deg);
    user-select: none;
  }

  .mem-card.flipped {
    background: #2a0a1a;
    box-shadow: 0 0 15px rgba(255,45,120,0.4);
  }
  .mem-card.matched {
    border-color: var(--neon-green);
    background: #0a1a0a;
    box-shadow: 0 0 15px rgba(57,255,20,0.4);
    cursor: default;
  }
  .mem-card:not(.flipped):not(.matched) span { display: none; }

  /* Reaction Game */
  .reaction-zone {
    width: 100%;
    max-width: 500px;
    height: 280px;
    margin: 0 auto;
    border: 2px solid var(--neon-yellow);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.1s;
    font-family: 'Press Start 2P', monospace;
    text-align: center;
    gap: 16px;
    user-select: none;
  }

  .reaction-zone.waiting { background: #1a1000; }
  .reaction-zone.ready { background: #001a00; }
  .reaction-zone.early { background: #1a0000; }

  .reaction-time {
    font-size: 40px;
    color: var(--neon-yellow);
    text-shadow: 0 0 20px var(--neon-yellow);
    font-family: 'VT323', monospace;
  }

  .reaction-results {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 12px;
    font-size: 18px;
  }

  /* Tic Tac Toe */
  .ttt-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4px;
    max-width: 320px;
    margin: 0 auto;
    background: #bf7fff;
  }

  .ttt-cell {
    background: var(--card);
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Press Start 2P', monospace;
    font-size: 28px;
    cursor: pointer;
    transition: background 0.2s;
    user-select: none;
  }
  .ttt-cell:hover:not(.taken) { background: #1a0a2a; }
  .ttt-cell.x { color: var(--neon-cyan); }
  .ttt-cell.o { color: var(--neon-pink); }
  .ttt-cell.win { background: #1a1a00; }

  .ttt-info {
    text-align: center;
    margin: 10px 0;
    font-size: 24px;
  }

  .ttt-scores {
    display: flex;
    justify-content: center;
    gap: 30px;
    font-size: 20px;
    margin-bottom: 10px;
  }

  .controls-hint {
    text-align: center;
    color: var(--dim);
    font-size: 16px;
    margin-top: 8px;
  }
</style>
</head>
<body>

<header>
  <h1>‚ö° ARCADE ZONE ‚ö°</h1>
  <p>INSERT COIN TO PLAY</p>
</header>

<div class="game-select">
  <button class="game-btn active" data-game="snake">üêç SNAKE</button>
  <button class="game-btn" data-game="breakout">üß± BREAKOUT</button>
  <button class="game-btn" data-game="memory">üÉè MEMORY</button>
  <button class="game-btn" data-game="reaction">‚ö° REACTION</button>
  <button class="game-btn" data-game="tictactoe">‚úï TIC TAC TOE</button>
</div>

<div class="game-container">

  <!-- SNAKE -->
  <div class="game-panel active" id="panel-snake">
    <div class="score-bar">
      <span>SCORE: <span class="score" id="snake-score">0</span></span>
      <span class="best">BEST: <span id="snake-best">0</span></span>
    </div>
    <canvas id="snake-canvas" width="460" height="400" style="max-width:100%"></canvas>
    <div class="game-msg" id="snake-msg">
      <div style="color:var(--neon-green)">PRESS ENTER OR TAP TO START</div>
    </div>
    <div class="controls-hint">‚Üê ‚Üí ‚Üë ‚Üì OR WASD</div>
  </div>

  <!-- BREAKOUT -->
  <div class="game-panel" id="panel-breakout">
    <div class="score-bar">
      <span>SCORE: <span class="score" id="bo-score">0</span></span>
      <span>LIVES: <span id="bo-lives" style="color:var(--neon-pink)">‚ù§‚ù§‚ù§</span></span>
      <span class="best">BEST: <span id="bo-best">0</span></span>
    </div>
    <canvas id="breakout-canvas" width="460" height="340" style="max-width:100%"></canvas>
    <div class="game-msg" id="bo-msg">
      <div style="color:var(--neon-cyan)">PRESS ENTER OR TAP TO START</div>
    </div>
    <div class="controls-hint">‚Üê ‚Üí ARROW KEYS OR MOUSE/TOUCH</div>
  </div>

  <!-- MEMORY -->
  <div class="game-panel" id="panel-memory">
    <div class="score-bar">
      <span>MOVES: <span class="score" id="mem-moves">0</span></span>
      <span>PAIRS: <span id="mem-pairs" style="color:var(--neon-green)">0/8</span></span>
      <span class="best">BEST: <span id="mem-best">-</span></span>
    </div>
    <div class="memory-grid" id="memory-grid"></div>
    <div class="game-msg" id="mem-msg"></div>
    <button class="action-btn" onclick="initMemory()">NEW GAME</button>
  </div>

  <!-- REACTION -->
  <div class="game-panel" id="panel-reaction">
    <div class="reaction-zone waiting" id="reaction-zone">
      <div id="reaction-text" style="font-size:13px">CLICK TO START</div>
      <div id="reaction-sub" style="font-size:11px;color:var(--dim)">TEST YOUR REFLEXES</div>
    </div>
    <div class="reaction-results">
      <span>BEST: <span id="rx-best" style="color:var(--neon-yellow)">-</span></span>
      <span>LAST: <span id="rx-last" style="color:var(--neon-cyan)">-</span></span>
      <span>AVG (5): <span id="rx-avg" style="color:var(--neon-green)">-</span></span>
    </div>
  </div>

  <!-- TIC TAC TOE -->
  <div class="game-panel" id="panel-tictactoe">
    <div class="ttt-scores">
      <span style="color:var(--neon-cyan)">X: <span id="ttt-x-score">0</span></span>
      <span style="color:var(--dim)">DRAWS: <span id="ttt-draws">0</span></span>
      <span style="color:var(--neon-pink)">O: <span id="ttt-o-score">0</span></span>
    </div>
    <div class="ttt-info" id="ttt-info" style="color:#bf7fff">PLAYER X'S TURN</div>
    <div class="ttt-grid" id="ttt-grid"></div>
    <div class="game-msg" id="ttt-msg"></div>
    <button class="action-btn" onclick="initTTT()">NEW GAME</button>
    <div class="controls-hint">VS COMPUTER (YOU ARE X)</div>
  </div>

</div>

<script>
// ============ NAVIGATION ============
document.querySelectorAll('.game-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.game-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.game-panel').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('panel-' + btn.dataset.game).classList.add('active');
  });
});

// ============ SNAKE ============
(function() {
  const canvas = document.getElementById('snake-canvas');
  const ctx = canvas.getContext('2d');
  const CELL = 20;
  const COLS = canvas.width / CELL;
  const ROWS = canvas.height / CELL;
  let snake, dir, nextDir, food, score, best = 0, running = false, loop;

  function init() {
    snake = [{x:10,y:10},{x:9,y:10},{x:8,y:10}];
    dir = {x:1,y:0};
    nextDir = {x:1,y:0};
    score = 0;
    document.getElementById('snake-score').textContent = 0;
    placeFood();
    draw();
  }

  function placeFood() {
    let pos;
    do {
      pos = {x:Math.floor(Math.random()*COLS), y:Math.floor(Math.random()*ROWS)};
    } while (snake.some(s=>s.x===pos.x&&s.y===pos.y));
    food = pos;
  }

  function start() {
    if (running) return;
    running = true;
    document.getElementById('snake-msg').innerHTML = '';
    loop = setInterval(tick, 120);
  }

  function tick() {
    dir = nextDir;
    const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
    if (head.x<0||head.x>=COLS||head.y<0||head.y>=ROWS||snake.some(s=>s.x===head.x&&s.y===head.y)) {
      clearInterval(loop); running = false;
      if (score > best) { best = score; document.getElementById('snake-best').textContent = best; }
      document.getElementById('snake-msg').innerHTML = `<span style="color:var(--neon-pink)">GAME OVER!</span><br><span style="color:var(--dim)">PRESS ENTER TO RESTART</span>`;
      return;
    }
    snake.unshift(head);
    if (head.x===food.x && head.y===food.y) {
      score += 10;
      document.getElementById('snake-score').textContent = score;
      placeFood();
    } else { snake.pop(); }
    draw();
  }

  function draw() {
    ctx.fillStyle = '#0a0a0f';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    // Grid dots
    ctx.fillStyle = '#1a1a2a';
    for(let x=0;x<COLS;x++) for(let y=0;y<ROWS;y++) {
      ctx.fillRect(x*CELL+CELL/2-1, y*CELL+CELL/2-1, 2, 2);
    }
    // Food
    ctx.fillStyle = '#ff2d78';
    ctx.shadowColor = '#ff2d78';
    ctx.shadowBlur = 10;
    ctx.fillRect(food.x*CELL+2, food.y*CELL+2, CELL-4, CELL-4);
    ctx.shadowBlur = 0;
    // Snake
    snake.forEach((s,i) => {
      const t = i/snake.length;
      ctx.fillStyle = `hsl(${110 + t*40}, 100%, ${60 - t*20}%)`;
      ctx.shadowColor = '#39ff14';
      ctx.shadowBlur = i===0 ? 12 : 0;
      ctx.fillRect(s.x*CELL+1, s.y*CELL+1, CELL-2, CELL-2);
    });
    ctx.shadowBlur = 0;
  }

  document.addEventListener('keydown', e => {
    if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d','W','A','S','D'].includes(e.key)) e.preventDefault();
    const map = {ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0},
      w:{x:0,y:-1},s:{x:0,y:1},a:{x:-1,y:0},d:{x:1,y:0},
      W:{x:0,y:-1},S:{x:0,y:1},A:{x:-1,y:0},D:{x:1,y:0}};
    if (map[e.key]) {
      const d = map[e.key];
      if (d.x !== -dir.x || d.y !== -dir.y) nextDir = d;
    }
    if (e.key === 'Enter') { if (!running) { init(); start(); } }
  });

  canvas.addEventListener('click', () => { if(!running){ init(); start(); } });

  // Touch swipe
  let tx=0,ty=0;
  canvas.addEventListener('touchstart', e => { tx=e.touches[0].clientX; ty=e.touches[0].clientY; });
  canvas.addEventListener('touchend', e => {
    const dx=e.changedTouches[0].clientX-tx, dy=e.changedTouches[0].clientY-ty;
    if (!running) { init(); start(); return; }
    if (Math.abs(dx)>Math.abs(dy)) nextDir = dx>0?{x:1,y:0}:{x:-1,y:0};
    else nextDir = dy>0?{x:0,y:1}:{x:0,y:-1};
  });

  init();
})();

// ============ BREAKOUT ============
(function() {
  const canvas = document.getElementById('breakout-canvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  let paddle, ball, bricks, score, lives, best = 0, running = false, started = false, animId;
  const BW = 8, BC = 10, BROWS = 5, PAD_W = 80, PAD_H = 10;

  const COLORS = ['#ff2d78','#ff6b00','#ffe600','#39ff14','#00f5ff'];

  function init() {
    paddle = {x: W/2 - PAD_W/2, y: H-30, w: PAD_W, h: PAD_H, spd: 0};
    ball = {x: W/2, y: H-60, dx: 3, dy: -3, r: 7};
    score = 0; lives = 3;
    document.getElementById('bo-score').textContent = 0;
    document.getElementById('bo-lives').textContent = '‚ù§‚ù§‚ù§';
    bricks = [];
    const bw = (W - 20) / BC;
    for(let r=0;r<BROWS;r++) for(let c=0;c<BC;c++) {
      bricks.push({x:10+c*bw, y:40+r*24, w:bw-4, h:18, color:COLORS[r], alive:true});
    }
    draw();
  }

  function start() {
    if (running) return;
    running = true; started = true;
    document.getElementById('bo-msg').innerHTML = '';
    gameLoop();
  }

  function gameLoop() {
    update(); draw();
    if (running) animId = requestAnimationFrame(gameLoop);
  }

  function update() {
    // Move paddle
    paddle.x += paddle.spd;
    paddle.x = Math.max(0, Math.min(W - paddle.w, paddle.x));
    // Move ball
    ball.x += ball.dx; ball.y += ball.dy;
    // Walls
    if (ball.x - ball.r < 0) { ball.x = ball.r; ball.dx *= -1; }
    if (ball.x + ball.r > W) { ball.x = W - ball.r; ball.dx *= -1; }
    if (ball.y - ball.r < 0) { ball.y = ball.r; ball.dy *= -1; }
    // Paddle
    if (ball.y + ball.r >= paddle.y && ball.y + ball.r <= paddle.y + paddle.h &&
        ball.x >= paddle.x - ball.r && ball.x <= paddle.x + paddle.w + ball.r) {
      ball.dy = -Math.abs(ball.dy);
      const hit = (ball.x - (paddle.x + paddle.w/2)) / (paddle.w/2);
      ball.dx = hit * 5;
    }
    // Bottom
    if (ball.y + ball.r > H) {
      lives--;
      const hearts = ['','‚ù§','‚ù§‚ù§','‚ù§‚ù§‚ù§'];
      document.getElementById('bo-lives').textContent = lives >= 0 ? hearts[lives] : '';
      if (lives <= 0) {
        running = false;
        if (score > best) { best = score; document.getElementById('bo-best').textContent = best; }
        document.getElementById('bo-msg').innerHTML = `<span style="color:var(--neon-pink)">GAME OVER!</span><br><span style="color:var(--dim)">PRESS ENTER TO RESTART</span>`;
        return;
      }
      ball = {x:W/2, y:H-60, dx:3, dy:-3, r:7};
    }
    // Bricks
    bricks.forEach(b => {
      if (!b.alive) return;
      if (ball.x+ball.r>b.x && ball.x-ball.r<b.x+b.w && ball.y+ball.r>b.y && ball.y-ball.r<b.y+b.h) {
        b.alive = false;
        score += 10;
        document.getElementById('bo-score').textContent = score;
        ball.dy *= -1;
      }
    });
    if (bricks.every(b => !b.alive)) {
      running = false;
      document.getElementById('bo-msg').innerHTML = `<span style="color:var(--neon-yellow)">YOU WIN!</span><br><span style="color:var(--dim)">PRESS ENTER TO PLAY AGAIN</span>`;
    }
  }

  function draw() {
    ctx.fillStyle = '#0a0a0f';
    ctx.fillRect(0,0,W,H);
    // Bricks
    bricks.forEach(b => {
      if (!b.alive) return;
      ctx.fillStyle = b.color;
      ctx.shadowColor = b.color; ctx.shadowBlur = 6;
      ctx.fillRect(b.x, b.y, b.w, b.h);
    });
    ctx.shadowBlur = 0;
    // Paddle
    ctx.fillStyle = '#00f5ff';
    ctx.shadowColor = '#00f5ff'; ctx.shadowBlur = 12;
    ctx.fillRect(paddle.x, paddle.y, paddle.w, paddle.h);
    // Ball
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
    ctx.fillStyle = '#ffffff';
    ctx.shadowColor = '#ffffff'; ctx.shadowBlur = 15;
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'ArrowLeft') { e.preventDefault(); paddle.spd = -6; }
    if (e.key === 'ArrowRight') { e.preventDefault(); paddle.spd = 6; }
    if (e.key === 'Enter') { if(!running){ init(); start(); } }
  });
  document.addEventListener('keyup', e => {
    if (['ArrowLeft','ArrowRight'].includes(e.key)) paddle.spd = 0;
  });
  canvas.addEventListener('mousemove', e => {
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    paddle.x = (e.clientX - rect.left) * scaleX - paddle.w/2;
  });
  canvas.addEventListener('touchmove', e => {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const scaleX = W / rect.width;
    paddle.x = (e.touches[0].clientX - rect.left) * scaleX - paddle.w/2;
  }, {passive:false});
  canvas.addEventListener('click', () => { if(!running){ init(); start(); } });
  document.addEventListener('keyup', e => {
    if (['ArrowLeft','ArrowRight'].includes(e.key)) paddle.spd = 0;
  });

  init();
})();

// ============ MEMORY ============
const EMOJIS = ['üéÆ','üïπÔ∏è','üëæ','üöÄ','üíé','‚ö°','üî•','üåô'];
let memFlipped = [], memMatched = 0, memMoves = 0, memLocked = false, memBest = null;

function initMemory() {
  const cards = [...EMOJIS,...EMOJIS].sort(()=>Math.random()-0.5);
  memFlipped = []; memMatched = 0; memMoves = 0; memLocked = false;
  document.getElementById('mem-moves').textContent = 0;
  document.getElementById('mem-pairs').textContent = '0/8';
  document.getElementById('mem-msg').innerHTML = '';
  const grid = document.getElementById('memory-grid');
  grid.innerHTML = '';
  cards.forEach((emoji, i) => {
    const card = document.createElement('div');
    card.className = 'mem-card';
    card.dataset.emoji = emoji;
    card.dataset.index = i;
    card.innerHTML = `<span>${emoji}</span>`;
    card.addEventListener('click', () => flipCard(card));
    grid.appendChild(card);
  });
}

function flipCard(card) {
  if (memLocked || card.classList.contains('flipped') || card.classList.contains('matched')) return;
  card.classList.add('flipped');
  memFlipped.push(card);
  if (memFlipped.length === 2) {
    memLocked = true;
    memMoves++;
    document.getElementById('mem-moves').textContent = memMoves;
    setTimeout(checkMatch, 700);
  }
}

function checkMatch() {
  const [a,b] = memFlipped;
  if (a.dataset.emoji === b.dataset.emoji) {
    a.classList.add('matched'); b.classList.add('matched');
    memMatched++;
    document.getElementById('mem-pairs').textContent = `${memMatched}/8`;
    if (memMatched === 8) {
      if (memBest === null || memMoves < memBest) {
        memBest = memMoves;
        document.getElementById('mem-best').textContent = memBest + ' moves';
      }
      document.getElementById('mem-msg').innerHTML = `<span style="color:var(--neon-green)">üéâ CLEARED IN ${memMoves} MOVES!</span>`;
    }
  } else {
    a.classList.remove('flipped'); b.classList.remove('flipped');
  }
  memFlipped = []; memLocked = false;
}

initMemory();

// ============ REACTION ============
(function() {
  const zone = document.getElementById('reaction-zone');
  const textEl = document.getElementById('reaction-text');
  const subEl = document.getElementById('reaction-sub');
  let state = 'idle', startTime, timeout, times = [];

  function setState(s) {
    state = s;
    zone.className = 'reaction-zone';
    if (s === 'idle') {
      zone.classList.add('waiting');
      textEl.textContent = 'CLICK TO START';
      subEl.textContent = 'TEST YOUR REFLEXES';
      subEl.style.color = 'var(--dim)';
    } else if (s === 'waiting') {
      zone.classList.add('waiting');
      textEl.textContent = 'WAIT FOR IT...';
      subEl.textContent = 'DON\'T CLICK YET';
      subEl.style.color = 'var(--neon-yellow)';
    } else if (s === 'go') {
      zone.classList.add('ready');
      textEl.textContent = 'CLICK NOW!';
      textEl.style.color = 'var(--neon-green)';
      textEl.style.textShadow = '0 0 20px var(--neon-green)';
      subEl.textContent = '';
      startTime = Date.now();
    } else if (s === 'early') {
      zone.classList.add('early');
      textEl.textContent = 'TOO EARLY!';
      textEl.style.color = 'var(--neon-pink)';
      textEl.style.textShadow = '0 0 20px var(--neon-pink)';
      subEl.textContent = 'CLICK TO TRY AGAIN';
      subEl.style.color = 'var(--dim)';
    }
    if (s !== 'go') {
      textEl.style.color = '';
      textEl.style.textShadow = '';
    }
  }

  zone.addEventListener('click', () => {
    if (state === 'idle' || state === 'early') {
      setState('waiting');
      const delay = 2000 + Math.random() * 3000;
      timeout = setTimeout(() => setState('go'), delay);
    } else if (state === 'waiting') {
      clearTimeout(timeout);
      setState('early');
    } else if (state === 'go') {
      const ms = Date.now() - startTime;
      times.push(ms);
      if (times.length > 5) times.shift();
      document.getElementById('rx-last').textContent = ms + 'ms';
      const best = Math.min(...times);
      document.getElementById('rx-best').textContent = best + 'ms';
      const avg = Math.round(times.reduce((a,b)=>a+b,0)/times.length);
      document.getElementById('rx-avg').textContent = avg + 'ms';
      textEl.textContent = ms + 'ms';
      subEl.textContent = ms < 200 ? '‚ö° INSANE!' : ms < 300 ? 'üî• GREAT!' : ms < 400 ? 'üëç GOOD' : 'üò¥ TOO SLOW';
      subEl.style.color = 'var(--neon-cyan)';
      setTimeout(() => setState('idle'), 1500);
    }
  });

  setState('idle');
})();

// ============ TIC TAC TOE ============
let tttBoard, tttTurn, tttOver, tttScores = {X:0,O:0,draws:0};
const WIN_LINES = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

function initTTT() {
  tttBoard = Array(9).fill('');
  tttTurn = 'X';
  tttOver = false;
  document.getElementById('ttt-info').textContent = "PLAYER X'S TURN";
  document.getElementById('ttt-info').style.color = 'var(--neon-cyan)';
  document.getElementById('ttt-msg').innerHTML = '';
  const grid = document.getElementById('ttt-grid');
  grid.innerHTML = '';
  for(let i=0;i<9;i++) {
    const cell = document.createElement('div');
    cell.className = 'ttt-cell';
    cell.dataset.i = i;
    cell.addEventListener('click', () => tttClick(i, cell));
    grid.appendChild(cell);
  }
}

function tttClick(i, cell) {
  if (tttOver || tttBoard[i] || tttTurn !== 'X') return;
  makeMove(i, 'X');
  if (!tttOver) setTimeout(aiMove, 400);
}

function makeMove(i, player) {
  tttBoard[i] = player;
  const cells = document.querySelectorAll('.ttt-cell');
  cells[i].textContent = player;
  cells[i].classList.add(player.toLowerCase(), 'taken');
  const win = checkWin(player);
  if (win) {
    win.forEach(idx => cells[idx].classList.add('win'));
    tttOver = true;
    tttScores[player]++;
    document.getElementById(`ttt-${player.toLowerCase()}-score`).textContent = tttScores[player];
    const info = document.getElementById('ttt-info');
    info.textContent = player === 'X' ? 'üéâ YOU WIN!' : 'ü§ñ CPU WINS!';
    info.style.color = player === 'X' ? 'var(--neon-yellow)' : 'var(--neon-pink)';
    return;
  }
  if (tttBoard.every(c=>c)) {
    tttOver = true;
    tttScores.draws++;
    document.getElementById('ttt-draws').textContent = tttScores.draws;
    document.getElementById('ttt-info').textContent = "IT'S A DRAW!";
    document.getElementById('ttt-info').style.color = 'var(--dim)';
    return;
  }
  tttTurn = player === 'X' ? 'O' : 'X';
  const info = document.getElementById('ttt-info');
  info.textContent = tttTurn === 'X' ? "PLAYER X'S TURN" : "CPU THINKING...";
  info.style.color = tttTurn === 'X' ? 'var(--neon-cyan)' : 'var(--neon-pink)';
}

function checkWin(p) {
  for(const line of WIN_LINES) {
    if(line.every(i => tttBoard[i] === p)) return line;
  }
  return null;
}

function aiMove() {
  if (tttOver || tttTurn !== 'O') return;
  // Minimax
  let best = -Infinity, move = -1;
  for(let i=0;i<9;i++) {
    if (!tttBoard[i]) {
      tttBoard[i] = 'O';
      const val = minimax(tttBoard, 0, false);
      tttBoard[i] = '';
      if (val > best) { best = val; move = i; }
    }
  }
  if (move >= 0) makeMove(move, 'O');
}

function minimax(board, depth, isMax) {
  if (checkWinBoard('O')) return 10 - depth;
  if (checkWinBoard('X')) return depth - 10;
  if (board.every(c=>c)) return 0;
  if (isMax) {
    let best = -Infinity;
    for(let i=0;i<9;i++) {
      if (!board[i]) { board[i]='O'; best=Math.max(best,minimax(board,depth+1,false)); board[i]=''; }
    }
    return best;
  } else {
    let best = Infinity;
    for(let i=0;i<9;i++) {
      if (!board[i]) { board[i]='X'; best=Math.min(best,minimax(board,depth+1,true)); board[i]=''; }
    }
    return best;
  }
}

function checkWinBoard(p) {
  return WIN_LINES.some(line => line.every(i => tttBoard[i] === p));
}

initTTT();
</script>
</body>
</html>
